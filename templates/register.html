<!-- register.html -->


<!DOCTYPE html>
<html>
        <head>
                <title>Register</title>
                <meta charset="UTF-8">
                <link rel="stylesheet" type="text/css" href="../static/style/style.css">
        </head>


<style>
        .homer {
              position: relative;
              top: calc(20% - 70px);
              left: calc(50% - 300px);
              width: 50px;
              padding: 5px;
              margin: 5px;
              background-color: #45d16a;
              box-shadow: 3px 3px #24853e;
              border: 2px #000;
              border-radius: 15px;
            }
        
        .forme {
              font-size: 30px;
              color: #000;
              border: 2px solid #24853e;
              border-radius: 15px;
              margin: 5px;
              text-align: center;
            }

        .box h3 {
              text-align: center;
              font-size: 10px;
              color: #000;
              font-family: Arial, Helvetica, sans-serif;
            }
</style>
<body onload=errorcheck()><script src="../static/style/clock.js"></script>
  <div style="display:flex;position:relative;top:calc(20% - 70px);">
    <div class="homer" style="width:85px;">
      <form action="/login">
        <input type="submit" value="Go to Login"/>
      </form>
    </div>
    <div class="homer" style="width:165px;">
      <form action="/register/organization">
        <input type="submit" value="Register an Organization"/>
      </form>
    </div>
  </div>
  <div class="box" id="box">
    <h1>GLORBENIAN NATIONAL BANK</h1>
    <p>Register (Personal Account)</p>
    <h2 id="heading2"></h2>
    <form id="register_form" action="/register" method="POST">
      <div class="forme">
        Username: <input type="text" name="username" minlength="8" maxlength="80" id="usernameID" style="padding-right: 40px; top: 100%; right: 100%;" onclick='returntonormal()' required>
        <label id="userCharCount" style="position: relative; top: 0px; right: 42.5px; font-size: 10px; font-family: Arial, Helvetica, sans-serif; color: rgb(0, 0, 0);">80 / 80</label>
        <br>

        Password: <input type="password" name="password" minlength="8" maxlength="80" id="passwordID" style="padding-right: 40px; top: 100%; right: 100%;" onclick='returntonormal()' required>
        <label id="passCharCount" style="position: relative; top: 0px; right: 42.5px; font-size: 10px; font-family: Arial, Helvetica, sans-serif; color: rgb(0, 0, 0);">80 / 80</label>
        <br>

        National ID: <input type="text" name="national" maxlength="80" id="nationalID" style="padding-right: 40px; top: 100%; right: 100%;" onclick='returntonormal()' required>
        <label id="nationalCharCount" style="position: relative; top: 0px; right: 42.5px; font-size: 10px; font-family: Arial, Helvetica, sans-serif; color: rgb(0, 0, 0);">80 / 80</label>
        <br>

        Email (optional): <input type="email" name="email"  minlength="8" maxlength="80" id="emailID" style="padding-right: 40px; top: 100%; right: 100%;" onclick='returntonormal()'>
        <label id="emailCharCount" style="position: relative; top: 0px; right: 42.5px; font-size: 10px; font-family: Arial, Helvetica, sans-serif; color: rgb(0, 0, 0);">80 / 80</label>
        <br>

        <label class="input" style="font-size: 15px;">I agree to the ToS:<input type="checkbox" name="tos" onclick='returntonormal()' required><br></label>
        <button type="submit">Register an account</button>
      </div>
    </form>
    <h3>Terms of Service: By checking "I agree to the ToS," you agree to the following terms and conditions. The Glorbenian National Bank will collect and store the provided username, password, national ID number, (and email or phone number). The Glorbenian National Bank may also collect data regarding your bank account (I.E. recent transactions), however this will be only under official government request. Any and all data provided goes through the host service onrender.com, only create an account if you trust them. In the event of fraud, the Glorbenian National Bank has the right to deactivate your account and repossess all money still in the account.</h3>
  </div>
  <script>
  const usernameInput = document.getElementById('usernameID');
  const userCharCount = document.getElementById('userCharCount');
  const userMaxChars = 80;

  const passwordInput = document.getElementById('passwordID');
  const passCharCount = document.getElementById('passCharCount');
  const passMaxChars = 80;

  const nationalInput = document.getElementById('nationalID');
  const nationalCharCount = document.getElementById('nationalCharCount');
  const nationalMaxChars = 80;

  const emailInput = document.getElementById('emailID');
  const emailCharCount = document.getElementById('emailCharCount');
  const emailMaxChars = 80;

    
  usernameInput.addEventListener('input', () => {
    const remaining = userMaxChars - usernameInput.value.length;
    userCharCount.textContent = `${remaining} / 80`;
  });
  passwordInput.addEventListener('input', () => {
    const remaining = passMaxChars - passwordInput.value.length; 
    passCharCount.textContent = `${remaining} / 80`;
  });
  nationalInput.addEventListener('input', () => {
    const remaining = nationalMaxChars - nationalInput.value.length;   
    nationalCharCount.textContent = `${remaining} / 80`;
  });
  emailInput.addEventListener('input', () => {
    const remaining = emailMaxChars - emailInput.value.length;   
    emailCharCount.textContent = `${remaining} / 80`;
  });
  



  function errorcheck() {
    const info = {{ info | tojson }};
    const error = "{{ error }}";
    const skinky = "{{ skinky }}";
    if (skinky != "") {
      document.querySelector(".box h2").innerHTML = skinky;

      document.getElementById("usernameID").value = info[0]
      document.getElementById("passwordID").value = info[1]
      document.getElementById("nationalID").value = info[2]
      document.getElementById("emailID").value = info[3]
    };
    if (error != "") {
      document.querySelector(".box h2").innerHTML = error;
      document.getElementById("usernameID").style.borderColor = 'red';
      document.getElementById("nationalID").style.borderColor = 'red';

      document.getElementById("usernameID").value = info[0]
      document.getElementById("passwordID").value = info[1]
      document.getElementById("nationalID").value = info[2]
      document.getElementById("emailID").value = info[3]
    };
  };

  function returntonormal() {
    document.getElementById('usernameID').style.borderColor = "black";
    document.getElementById('nationalID').style.borderColor = "black";
    document.querySelector(".box h2").innerHTML = "";
  };
  </script>
</body>
